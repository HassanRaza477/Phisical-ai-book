"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[1426],{8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var o=i(6540);const t={},s=o.createContext(t);function r(e){const n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(s.Provider,{value:n},e.children)}},9534:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"chapters/part3/chapter10","title":"Chapter 10: Capstone Phase 1: Building the Butler in Simulation","description":"Congratulations! You\'ve traversed the landscapes of ROS 2, explored advanced simulators, built vision systems, integrated VLA models, and even given your robot the power of conversation. Now, all that knowledge culminates in our capstone project: the Autonomous Humanoid Butler.","source":"@site/docs/chapters/part3/chapter10.md","sourceDirName":"chapters/part3","slug":"/chapters/part3/chapter10","permalink":"/Phisical-ai-book/docs/chapters/part3/chapter10","draft":false,"unlisted":false,"editUrl":"https://github.com/HassanRaza477/Phisical-ai-book.git/docs/chapters/part3/chapter10.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 8: Conversational Robotics","permalink":"/Phisical-ai-book/docs/chapters/part2/chapter8"},"next":{"title":"Chapter 11: Capstone Phase 2: Sim-to-Real Deployment","permalink":"/Phisical-ai-book/docs/chapters/part3/chapter11"}}');var t=i(4848),s=i(8453);const r={},l="Chapter 10: Capstone Phase 1: Building the Butler in Simulation",a={},c=[{value:"Project Vision: The Intelligent Home Assistant",id:"project-vision-the-intelligent-home-assistant",level:2},{value:"1. Environment Design in NVIDIA Isaac Sim",id:"1-environment-design-in-nvidia-isaac-sim",level:2},{value:"2. Developing Agent Skills",id:"2-developing-agent-skills",level:2},{value:"<code>Skill_NavigateTo(room)</code>",id:"skill_navigatetoroom",level:3},{value:"<code>Skill_ScanFor(object)</code>",id:"skill_scanforobject",level:3},{value:"<code>Skill_PickUp(object_pose)</code>",id:"skill_pickupobject_pose",level:3},{value:"<code>Skill_PlaceAt(location)</code>",id:"skill_placeatlocation",level:3},{value:"<code>Skill_Follow(person_id)</code> (Optional)",id:"skill_followperson_id-optional",level:3},{value:"3. Orchestration with Behavior Trees",id:"3-orchestration-with-behavior-trees",level:2},{value:"Behavior Tree Basics (<code>BehaviorTree.CPP</code>)",id:"behavior-tree-basics-behaviortreecpp",level:3},{value:"Example: &quot;Find My Keys and Bring Them to Me&quot;",id:"example-find-my-keys-and-bring-them-to-me",level:3},{value:"4. Integration: All Chapters Come Together",id:"4-integration-all-chapters-come-together",level:2}];function h(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"chapter-10-capstone-phase-1-building-the-butler-in-simulation",children:"Chapter 10: Capstone Phase 1: Building the Butler in Simulation"})}),"\n",(0,t.jsxs)(n.p,{children:["Congratulations! You've traversed the landscapes of ROS 2, explored advanced simulators, built vision systems, integrated VLA models, and even given your robot the power of conversation. Now, all that knowledge culminates in our capstone project: the ",(0,t.jsx)(n.strong,{children:"Autonomous Humanoid Butler"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["This chapter is the first of a two-part capstone. Our goal here is ambitious: ",(0,t.jsx)(n.strong,{children:"By the end of this chapter, you will have a simulated humanoid robot that can understand and execute spoken commands within a virtual apartment, entirely within NVIDIA Isaac Sim."})]}),"\n",(0,t.jsx)(n.p,{children:'We will design an environment, develop modular "Agent Skills," and use Behavior Trees to orchestrate these skills into intelligent, goal-driven behaviors.'}),"\n",(0,t.jsx)(n.h2,{id:"project-vision-the-intelligent-home-assistant",children:"Project Vision: The Intelligent Home Assistant"}),"\n",(0,t.jsx)(n.p,{children:"Imagine a humanoid robot that can:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Navigate to specific rooms in an apartment."}),"\n",(0,t.jsx)(n.li,{children:"Find and identify objects."}),"\n",(0,t.jsx)(n.li,{children:"Pick up objects."}),"\n",(0,t.jsx)(n.li,{children:"Respond to your commands in natural language."}),"\n",(0,t.jsx)(n.li,{children:"Perform sequences of actions to fulfill complex requests."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This chapter will build the complete software stack for this butler in the safe, powerful environment of Isaac Sim."}),"\n",(0,t.jsx)(n.h2,{id:"1-environment-design-in-nvidia-isaac-sim",children:"1. Environment Design in NVIDIA Isaac Sim"}),"\n",(0,t.jsx)(n.p,{children:"Our butler needs a home. We will create a simple, yet functional, virtual apartment in Isaac Sim."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Setting up the Scene"}),": Use Isaac Sim's USD stage editor to create walls, a floor, and basic lighting."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Adding Furniture"}),": Place essential items like a ",(0,t.jsx)(n.code,{children:"kitchen_table"}),", a ",(0,t.jsx)(n.code,{children:"sofa"}),", and a ",(0,t.jsx)(n.code,{children:"bookshelf"})," in designated ",(0,t.jsx)(n.code,{children:"room_locations"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Populating with Objects"}),": Place objects that the robot will interact with, such as a ",(0,t.jsx)(n.code,{children:"key_set"}),", a ",(0,t.jsx)(n.code,{children:"water_bottle"}),", and a ",(0,t.jsx)(n.code,{children:"remote_control"}),". These objects should have semantic labels (e.g., ",(0,t.jsx)(n.code,{children:"object_type: water_bottle"}),") for our perception system."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"(Screenshot: The designed virtual apartment in Isaac Sim with furniture and target objects.)"})}),"\n",(0,t.jsx)(n.h2,{id:"2-developing-agent-skills",children:"2. Developing Agent Skills"}),"\n",(0,t.jsxs)(n.p,{children:["Central to our butler's design is the concept of ",(0,t.jsx)(n.strong,{children:"Agent Skills"}),". These are modular, reusable pieces of functionality that abstract away the low-level robotics details. Each skill will have a clear input and output, allowing them to be easily composed. We'll implement each as a ROS 2 Action Server."]}),"\n",(0,t.jsx)(n.h3,{id:"skill_navigatetoroom",children:(0,t.jsx)(n.code,{children:"Skill_NavigateTo(room)"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Description"}),": Moves the robot to a specified room or location."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Implementation"}),": Utilizes ROS 2 navigation stack (Nav2) with a pre-built map of the apartment. The Action Server takes the ",(0,t.jsx)(n.code,{children:"room_name"}),' (e.g., "kitchen") as a goal and publishes navigation commands.']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ROS Interface"}),": ",(0,t.jsx)(n.code,{children:"robot_skills/action/NavigateTo"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"skill_scanforobject",children:(0,t.jsx)(n.code,{children:"Skill_ScanFor(object)"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Description"}),": Commands the robot to visually search for a specified object in its current location."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Implementation"}),": The Action Server takes ",(0,t.jsx)(n.code,{children:"object_name"}),' (e.g., "water_bottle") as a goal. It triggers the perception node (Chapter 6) and guides the robot\'s head/torso to scan the environment. Returns the ',(0,t.jsx)(n.code,{children:"pose"})," of the detected object."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ROS Interface"}),": ",(0,t.jsx)(n.code,{children:"robot_skills/action/ScanFor"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"skill_pickupobject_pose",children:(0,t.jsx)(n.code,{children:"Skill_PickUp(object_pose)"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Description"}),": Commands the robot to approach and grasp an object at a given pose."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Implementation"}),": Takes the ",(0,t.jsx)(n.code,{children:"object_pose"})," (from ",(0,t.jsx)(n.code,{children:"Skill_ScanFor"}),") as a goal. Uses inverse kinematics to calculate joint trajectories for the arm and commands the gripper to close."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ROS Interface"}),": ",(0,t.jsx)(n.code,{children:"robot_skills/action/PickUp"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"skill_placeatlocation",children:(0,t.jsx)(n.code,{children:"Skill_PlaceAt(location)"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Description"}),": Places a held object at a specified location (e.g., on a table, in a box)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Implementation"}),": Takes ",(0,t.jsx)(n.code,{children:"target_location_pose"})," as a goal. Plans arm trajectory and opens the gripper."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ROS Interface"}),": ",(0,t.jsx)(n.code,{children:"robot_skills/action/PlaceAt"})]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"skill_followperson_id-optional",children:[(0,t.jsx)(n.code,{children:"Skill_Follow(person_id)"})," (Optional)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Description"}),": Enables the robot to follow a specified person using vision."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Implementation"}),": Uses a tracking algorithm and navigation."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ROS Interface"}),": ",(0,t.jsx)(n.code,{children:"robot_skills/action/Follow"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:["(Code Snippet: A simplified Python code showing the ",(0,t.jsx)(n.code,{children:"Skill_NavigateTo"})," Action Server structure.)"]})}),"\n",(0,t.jsx)(n.h2,{id:"3-orchestration-with-behavior-trees",children:"3. Orchestration with Behavior Trees"}),"\n",(0,t.jsxs)(n.p,{children:["With our Agent Skills defined, we need a way to combine them into complex, robust behaviors. ",(0,t.jsx)(n.strong,{children:"Behavior Trees"})," (",(0,t.jsx)(n.code,{children:"BehaviorTree.CPP"}),") are a powerful tool for this. They allow us to visually and logically define sequences, conditions, and fallback behaviors, making task planning intuitive and robust."]}),"\n",(0,t.jsxs)(n.h3,{id:"behavior-tree-basics-behaviortreecpp",children:["Behavior Tree Basics (",(0,t.jsx)(n.code,{children:"BehaviorTree.CPP"}),")"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Nodes"}),": Selector (",(0,t.jsx)(n.code,{children:"?"}),"), Sequence (",(0,t.jsx)(n.code,{children:"->"}),"), Parallel (",(0,t.jsx)(n.code,{children:"=>"}),"), Condition (",(0,t.jsx)(n.code,{children:"[]"}),"), Action (",(0,t.jsx)(n.code,{children:"<>"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Execution"}),": From left to right, top to bottom."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"States"}),": Success, Failure, Running."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"example-find-my-keys-and-bring-them-to-me",children:'Example: "Find My Keys and Bring Them to Me"'}),"\n",(0,t.jsx)(n.p,{children:"Let's design a Behavior Tree for a common request."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'\x3c!-- simple_butler_bt.xml --\x3e\n<root BTCPP_format="4">\n  <BehaviorTree Name="ButlerTask">\n    <Sequence>\n      <Action ID="SayHello"          server_name="conversation_server" goal="{user_command}"/>\n      <Action ID="NavigateToRoom"    room="living_room" />\n      <Action ID="ScanForObject"     object="key_set"   detected_pose="{keys_pose}"/>\n      <Condition ID="IsObjectFound"  pose="{keys_pose}"/>\n      <Sequence>\n        <Action ID="PickUpObject"    pose="{keys_pose}"/>\n        <Action ID="NavigateToRoom"    room="user_location"/>\n        <Action ID="PlaceAtLocation" location="user_hand"/>\n      </Sequence>\n      <Fallback>\n        <Action ID="SayTaskComplete" server_name="conversation_server" message="Here are your keys."/>\n        <Action ID="SayNotFound"     server_name="conversation_server" message="Sorry, I couldn\'t find your keys."/>\n      </Fallback>\n    </Sequence>\n  </BehaviorTree>\n</root>\n'})}),"\n",(0,t.jsxs)(n.p,{children:["This XML snippet shows how ",(0,t.jsx)(n.code,{children:"BehaviorTree.CPP"})," defines the logic:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Say hello (using the conversational system from Ch 8)."}),"\n",(0,t.jsx)(n.li,{children:"Navigate to the living room."}),"\n",(0,t.jsx)(n.li,{children:"Scan for the key set (using the perception/VLA from Ch 6/7)."}),"\n",(0,t.jsx)(n.li,{children:"If found, pick up the keys and bring them to the user."}),"\n",(0,t.jsx)(n.li,{children:"If not found, report failure."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"4-integration-all-chapters-come-together",children:"4. Integration: All Chapters Come Together"}),"\n",(0,t.jsx)(n.p,{children:"This capstone pulls from every previous chapter:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Isaac Sim (Ch 5)"}),": Provides the realistic environment and physics."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ROS 2 (Ch 2)"}),": The communication backbone."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Perception (Ch 6)"}),": ",(0,t.jsx)(n.code,{children:"Skill_ScanFor"})," relies on it."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"VLA Models (Ch 7)"}),": The underlying intelligence for understanding ",(0,t.jsx)(n.code,{children:"ScanFor"})," or ",(0,t.jsx)(n.code,{children:"PickUp"})," goals."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Conversational Robotics (Ch 8)"}),": The user interface."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:[(0,t.jsx)(n.code,{children:"ros2_control"})," (Ch 3)"]}),": For low-level joint control of the humanoid."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"By orchestrating these components with Behavior Trees, we achieve a level of autonomy that goes far beyond simple teleoperation. Your simulated butler is now capable of intelligent, goal-driven behavior."}),"\n",(0,t.jsx)(n.p,{children:"This concludes the first phase of our capstone. Your humanoid now has a mind, the ability to see, understand, and plan actions in a rich simulated environment. In the next chapter, we face the ultimate challenge: bringing this intelligent agent to life on a real, physical robot."})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}}}]);